<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-springboot-summary" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/25/springboot-summary/" class="article-date">
  <time datetime="2018-07-25T03:59:07.417Z" itemprop="datePublished">2018-07-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/25/springboot-summary/">springboot</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="springMVC"><a href="#springMVC" class="headerlink" title="springMVC"></a>springMVC</h3><p>springboot提供了开箱即用的web mvc，项目中用到的是gradle，只需要引用两个包就可以了</p>
<pre><code>compile(&#39;org.springframework.boot:spring-boot-starter&#39;)
compile(&#39;org.springframework.boot:spring-boot-starter-web&#39;)
</code></pre><p>并不需要做什么其他配置，就可以启动web项目，编写restful接口。还是有一些需要个性化定制的功能需要我们手动去配置。有一些并不是springboot独有，配置的时候都是采用代码代替xml的方式。问题记录如下：</p>
<ul>
<li><p>Json序列化，<br>springmvc都是需要配置的，之前都是通过xml来配置。在springboot里面需要自定义MessageConverter。注册bean的方式加载到spring消息转换器里面，默认是放置到转换器队列的最前面优先解析。<br>springmvc默认的json解析器是Jackson,我这边算是先继承MappingJackson2HttpMessageConverter，修改覆盖初始方法来定制化项目需要的json格式化规则。</p>
<pre><code>public class JsonMessageConverter extends MappingJackson2HttpMessageConverter {

       @Override
       protected void init(ObjectMapper objectMapper) {
           objectMapper.disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);
           objectMapper.disable(SerializationFeature.FAIL_ON_EMPTY_BEANS);
           objectMapper.enable(SerializationFeature.WRITE_ENUMS_USING_TO_STRING);
           objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);
           objectMapper.enable(DeserializationFeature.READ_ENUMS_USING_TO_STRING);
           objectMapper.enable(DeserializationFeature.ACCEPT_EMPTY_ARRAY_AS_NULL_OBJECT);

           objectMapper.setDateFormat(new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;));

           super.init(objectMapper);
       }
   }

</code></pre><p>后面需要将这个注册到spring bean管理里面。在configuration类里面注册</p>
<pre><code>@Bean
public HttpMessageConverters customConverters() {
   return new HttpMessageConverters(new JsonMessageConverter());
}

</code></pre></li>
<li><p>UTF8编码<br>同样是在configuration类里面注册，其实configuration就相当于spring的一个xml文件，每个方法相当于定义的一个bean，方法之间是可以互相依赖的。spring已经考虑到这点，不用担心依赖的时候破坏单例的特性。</p>
<pre><code>@Bean
public CharacterEncodingFilter encodingFilter() {

   CharacterEncodingFilter encodingFilter = new CharacterEncodingFilter();
   encodingFilter.setEncoding(&quot;UTF-8&quot;);
   encodingFilter.setForceEncoding(true);
   return encodingFilter;
}

</code></pre></li>
<li><p>拦截器<br>用到拦截器的时候，需要继承WebMvcConfigurerAdapter，通过适配器的模式，覆盖相应的方法。当然同时这个类需要标注为configuration类。</p>
<p>| 方法 |<br>|——–|<br>|configurePathMatch|<br>|configureContentNegotiation|<br>|configureAsyncSupport|<br>|configureDefaultServletHandling|<br>|addFormatters|<br>|addInterceptors|<br>|addResourceHandlers|<br>|addCorsMappings|<br>|addViewControllers|<br>|configureViewResolvers|<br>|addArgumentResolvers|<br>|addReturnValueHandlers|<br>|configureMessageConverters|<br>|extendMessageConverters|<br>|configureHandlerExceptionResolvers|<br>|extendHandlerExceptionResolvers|<br>|getValidator|<br>|getMessageCodesResolver|<br>拦截器添加选择覆盖addInterceptors</p>
<pre><code>@Override
public void addInterceptors(InterceptorRegistry registry) {
   registry.addInterceptor(new MappedInterceptor(new String[]{&quot;/**&quot;}, new String[]{&quot;&quot;},
           new MvcInterceptor()));
}
</code></pre><p>MvcInterceptor是自定义的拦截器，如果需要用到url拦截的功能，需要使用spring带的MappedInterceptor定义拦截的url和排除的url<br>项目中还用到了addArgumentResolvers，addReturnValueHandlers就不一一列举了。</p>
</li>
</ul>
<h3 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h3><ul>
<li><p>属性文件<br>使用@PropertySources({@PropertySource(value = “classpath:setting.properties”)})来引入，不过这个不是springboot里面的东西。</p>
</li>
<li><p>项目分布</p>
<ul>
<li>css,js前端等用到的组件都分布在public下面或者static下面<br>需要渲染的模板定义在templates里面，安利一下我正在使用的模板<a href="http://www.mitchellbosecke.com/pebble/documentation/guide/basic-usage" target="_blank" rel="noopener">pebble</a></li>
<li>数据库使用的是mybatis，sql还是写在xml里面在，始终觉得在代码里面写sql比较别扭。</li>
<li><p>打包工具使用的是gradle，第一次接触，感觉还是不错，在编译速度上超过了maven。</p>
<pre><code>compile(&#39;org.springframework.boot:spring-boot-starter&#39;)
compile(&#39;org.springframework.boot:spring-boot-starter-log4j2&#39;)
compile(&#39;org.springframework.boot:spring-boot-starter-web&#39;) {
  //exclude group:&#39;org.springframework.boot&#39;,module:&quot;spring-boot-starter-tomcat&quot;
}
compile(&#39;org.springframework.boot:spring-boot-devtools&#39;)
compile(&#39;org.springframework.boot:spring-boot-starter-test&#39;)
compile(&#39;org.mybatis.spring.boot:mybatis-spring-boot-starter:1.3.0&#39;)

compile(&#39;mysql:mysql-connector-java:6.0.5&#39;)
compile(&#39;com.zaxxer:HikariCP:2.6.1&#39;)

compile(&#39;org.projectlombok:lombok:1.16.16&#39;)

//token
compile(&quot;io.jsonwebtoken:jjwt:0.7.0&quot;)

//bean copy
compile(&#39;commons-beanutils:commons-beanutils:1.9.3&#39;)

//apache commons lang3
compile(&#39;org.apache.commons:commons-lang3:3.6&#39;)

compile(&#39;javax.validation:validation-api:2.0.0.CR2&#39;)

testCompile(&#39;junit:junit:4.12&#39;)

</code></pre><p>项目中用到的jar包如上，springboot的版本号定义在buildscript里面在。使用的是1.5.2</p>
</li>
</ul>
</li>
<li><p>项目发布<br>项目还是采用外置的tomcat发布，需要在启动类Application继承SpringBootServletInitializer，覆盖</p>
<pre><code>@Override
protected SpringApplicationBuilder configure(SpringApplicationBuilder builder) {
   return builder.sources(Application.class);
}

</code></pre><p>发布的脚本上gradle clean build -x test</p>
</li>
<li>profile配置<br>使用了gradle，在dev环境和prod环境的配置上，相对来说是没有maven好使的，<br>需要启动的时候在环境变量里面配置-Dspring.profiles.active=dev<br>其他的跟平常的spring开发还都是保持一致的。随着后续功能的开发慢慢会涉及到更多springboot的功能，个人感觉在开发效率上还是提升了不少。</li>
</ul>
<hr>
<p>后续研究了下gradle的分环境打包方式，参数网上的例子，操作步骤如下</p>
<ul>
<li>添加配置文件config.groovy<br>environments {<br>   dev {<br>   }<br>   prod {<br>   }<br>}<br>在dev和prod写不同环境下的变量值，按照groovy的方式</li>
<li>在build.gradle获取打包时指定的环境参数<pre><code>ext {
   profile = System.properties[&#39;spring.profiles.active&#39;]
}
</code></pre></li>
<li><p>读取config.groovy对应环境的的变量值</p>
<pre><code>def loadGroovyConfig(){
   def configFile = file(&#39;config.groovy&#39;)
   new ConfigSlurper(profile).parse(configFile.toURL()).toProperties()
}

processResources {
   from(sourceSets.main.resources.srcDirs) {
       filter(org.apache.tools.ant.filters.ReplaceTokens, tokens: loadGroovyConfig())
   }
}
</code></pre></li>
<li>变量覆盖如图<br><img src="/images/TIM截图20180605114425.png" alt="log4j2"><br>后续打包还是按照正常的方式，指定-Dspring.profiles.active=dev或者prod就可以</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/25/springboot-summary/" data-id="cjk1xovci000aqsvtp46ptq00" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-semaphore" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/25/semaphore/" class="article-date">
  <time datetime="2018-07-25T03:59:07.414Z" itemprop="datePublished">2018-07-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/25/semaphore/">Semaphore</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>是一个分离的信号量计数器<br>主要核心方法有两个：</p>
<ul>
<li>acquire<br><em>从信号队列里面获取一个信号量，如果没有获取到则会一直阻塞到获取到信号量为止</em></li>
<li>release<br><em>释放一个信号量回队列，这种模型相对来说比较适合池这种类型的业务需求</em></li>
</ul>
<p>acquire(int permits) 一次获取多个信号量<br>acquireUninterruptibly() 连续获取一个信号量<br>acquireUninterruptibly(int permits) 连续获得多个信号量</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/25/semaphore/" data-id="cjk1xovcd0007qsvtcgd337fo" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-jdk8-reduce" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/25/jdk8-reduce/" class="article-date">
  <time datetime="2018-07-25T03:59:07.412Z" itemprop="datePublished">2018-07-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/25/jdk8-reduce/">JDK8 lambda reduce</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天接了一个需求，需要在302的同时，将代理的所有参数都在转发到新的页面上</p>
<p>直接上代码</p>
<pre><code>    Map&lt;String, String[]&gt; parameterMap = request.getParameterMap();
    List&lt;String&gt; paramList = new ArrayList&lt;&gt;();
    parameterMap.forEach((k,v) -&gt; {
       paramList.add(k + &quot;=&quot; + v[0]);
    });

    String paramChain = paramList.stream().reduce((s1, s2) -&gt; s1 + &quot;&amp;&quot; + s2).get();
    response.setStatus(302);
    response.setHeader(&quot;Location&quot;, lxAddress + &quot;?&quot; + paramChain);
    response.setHeader(&quot;Connection&quot;, &quot;close&quot;);
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/25/jdk8-reduce/" data-id="cjk1xovcb0005qsvtmji3m6a8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-java-scattered" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/25/java-scattered/" class="article-date">
  <time datetime="2018-07-25T03:59:07.409Z" itemprop="datePublished">2018-07-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/25/java-scattered/">JAVA scatter</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>查看系统的线程上下文切换次数</p>
<p>使用vmstat 3<br><img src="/images/TIM截图20180704163235.png" alt="vmstat"></p>
<p>其中cs就是context switch的次数，数值越高代表上线文切换的越频繁，耗时越多。每秒的切换次数可以和进程的总线程数进行比对，如果大于线程总数代表是满负荷运转</p>
<hr>
<p>java 线程状态之间的跃迁<br><img src="/images/TIM截图20180704193005.png" alt="thread change"></p>
<p>线程的各个状态及说明如下：</p>
<table>
<thead>
<tr>
<th style="text-align:left">状态名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">NEW</td>
<td>初始状态</td>
</tr>
<tr>
<td style="text-align:left">RUNNABLE</td>
<td>运行状态</td>
</tr>
<tr>
<td style="text-align:left">BLOCKED</td>
<td>阻塞状态</td>
</tr>
<tr>
<td style="text-align:left">WAITING</td>
<td>等待状态</td>
</tr>
<tr>
<td style="text-align:left">TIME_WAITING</td>
<td>超时等待状态</td>
</tr>
<tr>
<td style="text-align:left">TERMINATED</td>
<td>终止状态</td>
</tr>
</tbody>
</table>
<hr>
<p>synchronized 关键字的使用场景</p>
<table>
<thead>
<tr>
<th style="text-align:left">锁的方式</th>
<th>锁的对象</th>
<th>伪代码</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">实例方法</td>
<td>类的实例对象</td>
<td>public synchronized void method</td>
</tr>
<tr>
<td style="text-align:left">静态方法</td>
<td>类对象</td>
<td>public synchronized static void method</td>
</tr>
<tr>
<td style="text-align:left">实例对象</td>
<td>类的实例对象</td>
<td>synchronized (this)</td>
</tr>
<tr>
<td style="text-align:left">class对象</td>
<td>类对象</td>
<td>synchronized (A.class)</td>
</tr>
<tr>
<td style="text-align:left">普通对象</td>
<td>普通对象</td>
<td>synchronized (o)</td>
</tr>
</tbody>
</table>
<hr>
<p>mark 下 通过ReentrantLock中线程等待唤醒的状态跃迁<br><img src="/images/TIM截图20180720114120.png" alt="await|singal"></p>
<hr>
<p>java queue 方法</p>
<table>
<thead>
<tr>
<th style="text-align:left">方法名称</th>
<th>说明</th>
<th>是否阻塞</th>
<th>是否抛出异常</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">add</td>
<td>插入</td>
<td>否</td>
<td>是</td>
</tr>
<tr>
<td style="text-align:left">offer</td>
<td>插入</td>
<td>否</td>
<td>是</td>
</tr>
<tr>
<td style="text-align:left">remove</td>
<td>删除</td>
<td>否</td>
<td>否</td>
</tr>
<tr>
<td style="text-align:left">poll</td>
<td>删除</td>
<td>否</td>
<td>否</td>
</tr>
<tr>
<td style="text-align:left">element</td>
<td>获取</td>
<td>否</td>
<td>是</td>
</tr>
<tr>
<td style="text-align:left">peek</td>
<td>获取</td>
<td>否</td>
<td>是</td>
</tr>
</tbody>
</table>
<p>blocking queue</p>
<table>
<thead>
<tr>
<th style="text-align:left">方法名称</th>
<th>说明</th>
<th>是否阻塞</th>
<th>是否抛出异常</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">put</td>
<td>插入</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td style="text-align:left">offer <em>支持超时</em></td>
<td>插入</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td style="text-align:left">take</td>
<td>删除</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td style="text-align:left">poll <em>支持超时</em></td>
<td>删除</td>
<td>是</td>
<td>否</td>
</tr>
</tbody>
</table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/25/java-scattered/" data-id="cjk1xovcf0008qsvtgfu0pkqi" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-java-build-mode" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/25/java-build-mode/" class="article-date">
  <time datetime="2018-07-25T03:59:07.406Z" itemprop="datePublished">2018-07-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/25/java-build-mode/">java build mode</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>还有一种通过内部类来实现单例的方式，静态内部类只能访问外部类的静态方法和静态属性。现在一般利用这个特性来实现单例模式。应该类在初始化的时候线程是互斥的，可以完美的解决单例创建冲突的问题。</p>
<p>借用mybatis单例的实现来看一下：</p>
<p>Class:ParameterMapping</p>
<p>构造方法私有化：</p>
<p>private ParameterMapping() {<br>}</p>
<p>静态内部类来初始化外部对象：</p>
<p>public static class Builder {<br>    private ParameterMapping parameterMapping = new ParameterMapping();</p>
<pre><code>public Builder(Configuration configuration, String property, TypeHandler&lt;?&gt; typeHandler) { --生成ParameterMapping对象
  parameterMapping.configuration = configuration;
  parameterMapping.property = property;
  parameterMapping.typeHandler = typeHandler;
  parameterMapping.mode = ParameterMode.IN;
}

public Builder(Configuration configuration, String property, Class&lt;?&gt; javaType) {
  parameterMapping.configuration = configuration;
  parameterMapping.property = property;
  parameterMapping.javaType = javaType;
  parameterMapping.mode = ParameterMode.IN;
}
</code></pre><p>}</p>
<p>提供公共build方法来返回该单例对象：</p>
<p>public ParameterMapping build() {<br>      resolveTypeHandler();<br>      validate();<br>      return parameterMapping;<br>}</p>
<p>这种方式相对于一般的单例方式的实现，复杂度会相对高一点,其实是java的builder建造者模式。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/25/java-build-mode/" data-id="cjk1xovc70003qsvtc59i5s1g" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hexo-oschina" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/25/hexo-oschina/" class="article-date">
  <time datetime="2018-07-25T03:59:07.369Z" itemprop="datePublished">2018-07-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/25/hexo-oschina/">oschina git仓库提交webHook触发hexo博客更新</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="创建一个项目"><a href="#创建一个项目" class="headerlink" title="创建一个项目"></a>创建一个项目</h4><p><img src="/images/TIM截图20180428143154.png" alt="项目界面"></p>
<ol>
<li>将服务器上的代码整个打包传到项目上来，使用如下命令<br> 1.1    git init<br> 1.2 git add .<br> 1.3 git commit -m ‘init’<br> 1.4 git remote add origin ‘your remote ssh address’</li>
<li><p>后续就需要配置openresty，解决自动提交webHook触发脚本执行的功能<br> 2.1 openresty的安装可以参照官网<br> 2.2 启动还是跟nginx一样的，start nginx<br> 2.3 配置nginx的配置，执行lua脚本<br> 2.4 lua脚本中需要验证密码这一块，我暂时没处理，oschina的验证规则是在post body里面有一个参数是password，可以和自己的配置的webHook秘钥进行匹配就可以<br> 2.5 lua脚本只是简单执行依据脚本命令</p>
<pre><code> os.execute(&quot;bash /opt/lua/hexo.sh&quot;);
 ngx.say(&quot;OK&quot;)
 ngx.exit(200)

</code></pre><p> 2.6 主要是后续的shell命令，操作的流程是获取git 远程的代码，执行hexo的generate生成静态文件</p>
<pre><code> #! /bin/bash
 blog_dir=/opt/blog
 branch=master
 hexo=/root/.nvm/versions/node/v9.11.1/bin/hexo

 cd $blog_dir
 git reset --hard origin/$branch
 git clean -f
 git pull origin master

 cd $blog_dir
 $hexo generate
 echo &quot;success&quot;

</code></pre><p> 2.7 静态文件的目录是public，前面装好的openresty也可以用作服务代理，将域名的root访问路径指向到public目录即可<br> 2.8 漏了nginx的转发配置了，有两个  一个是webHook地址，一个是服务器的请求地址</p>
<pre><code> server {
     listen       80;
     server_name  db101.cn;

     lua_code_cache off;

     location / {
         root   /opt/blog/public;
         index  index.html index.htm;
     }

     location /hexo/github {
         content_by_lua_file /opt/lua/hexo.lua;
     }
 }

</code></pre></li>
</ol>
<hr>
<p>后续就可以当更新了source下面的md文件。可以直接通过域名访问到最新的更新了。也可以修改其他的主体或者配置一类的文件。当有push操作时触发webHook操作，调用服务器的地址，最终更新页面。</p>
<p>上述步骤参考的网址 &gt; <a href="https://blog.liaol.net/" target="_blank" rel="noopener">https://blog.liaol.net/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/25/hexo-oschina/" data-id="cjk1xovcg0009qsvtbb4elwcm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/25/hello-world/" class="article-date">
  <time datetime="2018-07-25T03:59:07.367Z" itemprop="datePublished">2018-07-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/25/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre><code class="bash">$ hexo new &quot;My New Post&quot;
</code></pre>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre><code class="bash">$ hexo server
</code></pre>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre><code class="bash">$ hexo generate
</code></pre>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre><code class="bash">$ hexo deploy
</code></pre>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/25/hello-world/" data-id="cjk1xovc90004qsvtibnzp40f" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-git-summary" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/25/git-summary/" class="article-date">
  <time datetime="2018-07-25T03:59:07.364Z" itemprop="datePublished">2018-07-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/25/git-summary/">git入门简介</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="git基础概念"><a href="#git基础概念" class="headerlink" title="git基础概念"></a>git基础概念</h3><p>git是目前最好的版本控制系统（没有之一）</p>
<h4 id="branch"><a href="#branch" class="headerlink" title="branch"></a>branch</h4><p>git里面核心的内容是分支（branch）,不同于svn的是，分支的成本很低，只记录变化的文件。git官方是非常推荐是使用分支来开发，我们在自己本地进行某些特性开发的时候，也是可以开辟一个本地分支。操作方式分为两种</p>
<ul>
<li>自己本地建一个分支，可选择方式有两种，本地写好后自己merge到develop分支，删除本地分支。—-个人建议采用这种方式</li>
<li>如果是业务特性，例如feature分支，可能对现有在develop上开发的其他工程师造成影响，且有两个人以上开发这个feature分支。或者需要为某些特性单独做一些特别的处理。这就需要推送到远程分支上面去。 —-个人建议如果一个人开发的话，开新的本地分支是有效的操作方式<br>操作命令如下<ul>
<li>git branch (name)</li>
<li>git checkout (name)    </li>
<li>git checkout -b (name) 是上面两个命令的合集</li>
<li>git merge <name> git有个概念是当前分支，如果用命令行的话可以清晰的看到，这个merge的意思是在将<name>分支合并到当前分支上</name></name></li>
<li>git push origin (name) 推送到远程分支    </li>
<li>git branch -d (name) 删除本地分支 git中一个远程分支对应一个本地分支，名字可以不一样，不过建议最好保持一致。</li>
<li>git push origin :(name) 冒号前面是空的代表将一个空推送到远程分支，即是删除远程分支</li>
<li>git push origin –delete (name) git1.7 以上支持这个方式 建议删除时不要填写master,develop等比较关键的分支</li>
</ul>
</li>
</ul>
<h4 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h4><p>git第二个概念是commit，提交记录，每次提交都会产生一个sha1-hash值，Git仓库中内容和头信息（Header）的一个校验和(checksum)。<br>主要使用来保证每次提交的完整性。</p>
<p>git log<br><img src="/images/log.png" alt="log"></p>
<p>可以看到每个commit后都有一个加密的串。这个串可以做一些回滚或者checkout的操作。—下面的这些操作建议少使用。</p>
<ul>
<li>git reset –soft (id) 撤销当前的提交，会保持当前的提交和之间的跨度提交，将代码回退到id对应的版本。</li>
<li>git reset –hard (id) 撤销当前的提交，将代码硬回退到id对应的版本。</li>
<li>git reset . 撤销当前本地的所有提交和修改。回退到你拉代码时的版本。可以重新get代码</li>
<li>git reset –soft HEAD 回退一个版本</li>
<li>git reset –soft HEAD~3 向前回退三个版本</li>
<li>git reset –hard origin/master 回退到服务器最新</li>
</ul>
<p>有时候可能需要撤销当前的修改，做其他的任务的时候，操作方式分为三种。</p>
<ul>
<li>直接提交当前的提交</li>
<li>暂存当前的提交<ul>
<li>git stash 暂存起来</li>
<li>git stash pop 拿出暂存区的内容<br><img src="/images/stash.png" alt="stash"></li>
<li>git stash list 查看暂存区列表</li>
</ul>
</li>
</ul>
<ul>
<li>直接提交抛弃到此次的修改<ul>
<li>git checkout . 也可以撤销某个文件的修改 .替换成修改的文件，需要带上路径</li>
</ul>
</li>
</ul>
<h4 id="stage（暂存区）"><a href="#stage（暂存区）" class="headerlink" title="stage（暂存区）"></a>stage（暂存区）</h4><p><img src="/images/data-flow.png" alt="data"></p>
<p>操作步骤如下：</p>
<ul>
<li>git add . 增加索引 提交到暂存区</li>
<li>git commit -m ‘message’提交到本地仓库</li>
<li>git push origin (BranchName) 提交到远程仓库</li>
<li>git commit -a -m ‘message’</li>
</ul>
<p>上面三个步骤是将本地代码提交到远程服务器的基本操作。</p>
<h4 id="git-flow"><a href="#git-flow" class="headerlink" title="git flow"></a>git flow</h4><p>git工作流程是以分支为基础的操作流程<br><img src="/images/git-flow.png" alt="flow"></p>
<blockquote>
<p>可以看下项目里面现在的分支规则</p>
</blockquote>
<p>这个地方需要发布代码的遵循这个规则。现在基本是有（徐蕾）负责。</p>
<h4 id="工作中git的使用"><a href="#工作中git的使用" class="headerlink" title="工作中git的使用"></a>工作中git的使用</h4><p>我一般遇到的问题和操作方式，感兴趣的也可以自己习惯一套自己的命令方式，不反对使用sourceTree和git tortoise等工具提交源码，原则是保证代码合并的时候不出问题。</p>
<ul>
<li>建立仓库,推送代码,建议使用ssh的方式，现在git支持http和ssh两种方式。<ul>
<li>git init</li>
<li>git add .</li>
<li>git commit -m ‘message’</li>
<li>git remote add origin (git url)</li>
<li>git push origin master</li>
<li>git checkout -b develop</li>
<li>git push origin develop</li>
<li>git remote set-url origin (git url)</li>
</ul>
</li>
<li>拉取代码，提交，推送代码<ul>
<li>git status</li>
<li>git add .</li>
<li>git commit -m ‘message’</li>
<li>git pull –rebase</li>
<li>git push origin ()</li>
</ul>
</li>
<li>遇到冲突的时候<ul>
<li>先解决掉本地的冲突，建议使用开发工具解决</li>
<li>git rebase –continue | git merge -m ‘message’</li>
<li>git add .</li>
<li>git push origin ()</li>
</ul>
</li>
<li>stash（隐藏起来） 当你需要临时修改其他的bug，但是现在已经的修改又不能提交时，建议采用这个方式<ul>
<li>git stash</li>
<li>git stash pop</li>
<li>git stash list</li>
</ul>
</li>
<li>建议多使用git的本地分支去辅助代码开发</li>
<li>建议每次提交时以一个单元去使用，意思就是一个独立的单元生成一个提交，在继续后面的开发。一次推送可以推送多个单元的提交</li>
<li>未完待续</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/25/git-summary/" data-id="cjk1xovbz0001qsvtrlabqg52" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-expression" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/25/expression/" class="article-date">
  <time datetime="2018-07-25T03:59:07.362Z" itemprop="datePublished">2018-07-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/25/expression/">Normal Expression</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>表达式的另类计算方式<br>9-2*(1+5)+9</p>
<p>将表达式从中缀表达式转化成后缀表达式</p>
<ol>
<li>先找出表达式中的所有数字 9 2 1 5 9</li>
<li>在找出其中的反括号，如果遇到返回号就反向排列前面的所有运算符号，与前面的数字排列在一起 9 2 1 5 + * - 9 +</li>
<li>针对 9 2 1 5 + * - 9 +  从左到右依次读取，遇到运算符号计算左边的两个值和运算符号的值</li>
<li>9 2 1 5 + <em> - 9 +  -&gt;  9 2 6 </em> - 9 + -&gt; 9 12 - 9 + -&gt; -3 9 + -&gt; 6</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/25/expression/" data-id="cjk1xovbm0000qsvtt7gcfdh3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/expression/">expression</a></li></ul>

    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/expression/">expression</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/expression/" style="font-size: 10px;">expression</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/07/25/springboot-summary/">springboot</a>
          </li>
        
          <li>
            <a href="/2018/07/25/semaphore/">Semaphore</a>
          </li>
        
          <li>
            <a href="/2018/07/25/jdk8-reduce/">JDK8 lambda reduce</a>
          </li>
        
          <li>
            <a href="/2018/07/25/java-scattered/">JAVA scatter</a>
          </li>
        
          <li>
            <a href="/2018/07/25/java-build-mode/">java build mode</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>